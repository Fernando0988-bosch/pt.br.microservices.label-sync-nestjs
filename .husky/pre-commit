#!/usr/bin/env sh

# Execute lint-staged
npx lint-staged

# Verificar se há commits anteriores antes de executar nx affected
if git rev-parse --verify HEAD~1 >/dev/null 2>&1; then
  # Há commits anteriores, executar affected test
  npx nx affected:test --base=HEAD~1 --head=HEAD
else
  # Primeiro commit, pular affected test
  echo "⏭️ Primeiro commit detectado, pulando nx affected:test"
fi
